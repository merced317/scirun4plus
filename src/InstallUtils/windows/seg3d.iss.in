; Script generated by the Inno Setup Script Wizard and by CMake.
; SEE THE DOCUMENTATION FOR DETAILS ON CREATING INNO SETUP SCRIPT FILES!

[Setup]
AppName=Seg3D
AppVerName=Seg3D @SEG3D_VERSION_MAJOR@.@SEG3D_VERSION_MINOR@
AppVersion=@SEG3D_VERSION_MAJOR@.@SEG3D_VERSION_MINOR@
AppPublisher=SCI Institute
AppPublisherURL=@SCI_URL@
AppSupportURL=@SCI_URL@
AppUpdatesURL=@SCI_URL@
AppCopyright=@SHORT_COPYRIGHT@
DefaultDirName={pf}\Seg3D
DefaultGroupName=Seg3D
OutputBaseFilename=@SEG3D_BASE_FILENAME@
AllowNoIcons=yes
Compression=lzma
SolidCompression=yes
SourceDir=@SCIRUN_TOP_DIR_NATIVE@
OutputDir=@SCIRUN_BINARY_DIR_NATIVE@
LicenseFile=@SCIRUN_SOURCE_DIR_NATIVE@\LICENSE
ArchitecturesInstallIn64BitMode=@SETUP_ARCH@
; Install on Windows XP or newer (actually a Windows NT build number)
MinVersion=0,5.01

[Languages]
Name: "english"; MessagesFile: "compiler:Default.isl"

[Tasks]
Name: "desktopicon"; Description: "{cm:CreateDesktopIcon}"; GroupDescription: "{cm:AdditionalIcons}"; Flags: unchecked

[Files]
; IMPORTANT: do NOT redistribute binaries built with Microsoft's Debug libraries except for internal use and debugging purposes!
Source: "@PATH_TO_CRT_REDIST_NATIVE@\*"; DestDir: "{app}\@CRT_REDIST@"; Flags: recursesubdirs
Source: "@PATH_TO_MFC_REDIST_NATIVE@\*"; DestDir: "{app}\@MFC_REDIST@"; Flags: recursesubdirs

; Seg3D build
Source: "@SCIRUN_SOURCE_DIR_NATIVE@\Applications\Seg3D\data\*"; Excludes: ".svn"; DestDir: "{app}\data"; Flags: ignoreversion replacesameversion
Source: "@SCIRUN_BINARY_DIR_NATIVE@\@BUILD_TYPE@\Seg3D.exe"; DestDir: "{app}"; Flags: ignoreversion replacesameversion
Source: "@SCIRUN_BINARY_DIR_NATIVE@\@BUILD_TYPE@\*.dll"; DestDir: "{app}"; Flags: ignoreversion replacesameversion
@DISABLE_PDB@Source: "@SCIRUN_BINARY_DIR_NATIVE@\lib\@BUILD_TYPE@\*.pdb"; DestDir: "{app}"; Flags: ignoreversion replacesameversion

; Documentation
Source: "@SCIRUN_BINARY_DIR_NATIVE@\Documentation\Seg3DTutorial.pdf"; DestDir: "{app}\Documentation"; Flags: ignoreversion replacesameversion recursesubdirs

; ITK build
@DISABLE_ITK@Source: "@ITK_DIR_NATIVE@\bin\Release\*.dll"; DestDir: "{app}"; Flags: ignoreversion replacesameversion
@DISABLE_PDB@Source: "@ITK_DIR_NATIVE@\bin\*.pdb"; DestDir: "{app}"; Flags: ignoreversion replacesameversion

; wxWidgets builds
@DISABLE_WX_LIBS@Source: "@WX_LIB_DIR_NATIVE@\*.dll"; DestDir: "{app}"; Flags: ignoreversion replacesameversion
@DISABLE_WX_PDB@Source: "@WX_LIB_DIR_NATIVE@\*.pdb"; DestDir: "{app}"; Flags: ignoreversion replacesameversion

[Icons]
Name: "{group}\Seg3D"; Filename: "{app}\Seg3D.exe"; WorkingDir: "{app}"
Name: "{commondesktop}\Seg3D"; Filename: "{app}\Seg3D.exe"; WorkingDir: "{app}"; Tasks: desktopicon
Name: "{group}\{cm:ProgramOnTheWeb,Seg3D}"; Filename: "@SCI_URL@"
Name: "{group}\Documentation"; Filename: "{app}\Documentation"
Name: "{group}\{cm:UninstallProgram,Seg3D}"; Filename: "{uninstallexe}"

[Run]
Filename: "{app}\Seg3D.exe"; Description: "{cm:LaunchProgram,Seg3D}"; Flags: nowait postinstall skipifsilent
